<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>LINKEY Blog Editor</title>
  
  <!-- Styles -->
  <link rel="stylesheet" href="css/editor.css">
  <link rel="stylesheet" href="css/linkey-theme.css">
</head>
<body>
  <div class="app-container">
    <!-- Header -->
    <header class="app-header">
      <h1>
        <img class="app-icon" src="../linkey_service/images/logo.png" alt="LINKEY" />
        Blog Editor
        <span class="app-version">ver 3.0</span>
      </h1>
      <div class="header-center">
        <div class="viewport-toggle-group">
          <div class="viewport-toggle">
            <button class="viewport-btn active" data-viewport="desktop" title="Desktop 4K (3840px)">üñ•Ô∏è</button>
            <button class="viewport-btn" data-viewport="laptop" title="Laptop Full HD (1920px)">üíª</button>
            <button class="viewport-btn" data-viewport="tablet" title="Tablet (1024px)">üì±</button>
            <button class="viewport-btn" data-viewport="mobile" title="Mobile (414px)">üì±</button>
          </div>
          <div class="viewport-info" id="viewport-info">Desktop 4K - 3840px</div>
        </div>
      </div>
      <div class="header-actions">
        <div class="lang-toggle">
          <button class="lang-btn active" data-lang="en">EN</button>
          <button class="lang-btn" data-lang="ja">Êó•Êú¨Ë™û</button>
        </div>
        <button class="header-export-btn" id="btn-export-html-header">
          <span class="file-btn-label" data-i18n="export.label">Copy HTML</span>
        </button>
      </div>
    </header>
    
    <!-- Main Body -->
    <div class="app-body">
      <!-- Component Palette -->
      <aside class="component-palette">
        <div class="palette-section">
          <h3 data-i18n="palette.headers">Headers</h3>
          <div class="component-item" draggable="true" data-type="header" data-subtype="1">
            <span class="icon">H1</span>
          </div>
          <div class="component-item" draggable="true" data-type="header" data-subtype="2">
            <span class="icon">H2</span>
          </div>
          <div class="component-item" draggable="true" data-type="header" data-subtype="3">
            <span class="icon">H3</span>
          </div>
          <div class="component-item" draggable="true" data-type="header" data-subtype="4">
            <span class="icon">H4</span>
          </div>
        </div>
        
        <div class="palette-section">
          <h3 data-i18n="palette.text">Text</h3>
          <div class="component-item" draggable="true" data-type="paragraph" data-variant="normal">
            <span class="icon preview-text">Paragraph</span>
          </div>
          <div class="component-item" draggable="true" data-type="paragraph" data-variant="small">
            <span class="icon preview-text-small">Small</span>
          </div>
          <div class="component-item" draggable="true" data-type="paragraph" data-variant="small-gray">
            <span class="icon preview-text-small-gray">Caption</span>
          </div>
        </div>
        
        <div class="palette-section">
          <h3 data-i18n="palette.lists">Lists</h3>
          <div class="component-item" draggable="true" data-type="list" data-list-type="ul">
            <span class="icon preview-list-ul">
              <span>‚Ä¢ Item</span>
              <span>‚Ä¢ Item</span>
            </span>
          </div>
          <div class="component-item" draggable="true" data-type="list" data-list-type="ol">
            <span class="icon preview-list-ol">
              <span>1. Item</span>
              <span>2. Item</span>
            </span>
          </div>
          <div class="component-item" draggable="true" data-type="list" data-list-type="ol-title">
            <span class="icon preview-list-ol-title">
              <span><strong>01</strong> Title</span>
              <span class="indent">Text</span>
            </span>
          </div>
          <div class="component-item" draggable="true" data-type="list" data-list-type="dl">
            <span class="icon preview-list-dl">
              <span><strong>Key:</strong> Value</span>
            </span>
          </div>
        </div>

        <div class="palette-section">
          <h3 data-i18n="palette.cards">Cards</h3>
          <div class="component-item" draggable="true" data-type="card" data-subtype="2-col">
            <span class="icon">üÉè</span>
            <span class="label">2 Columns</span>
          </div>
          <div class="component-item" draggable="true" data-type="card" data-subtype="3-col">
            <span class="icon">üÉè</span>
            <span class="label">3 Columns</span>
          </div>
        </div>
        
        <div class="palette-section">
          <h3>Coming Soon</h3>
          <div class="component-item" style="opacity: 0.5; cursor: not-allowed;" draggable="false">
            <span class="icon">üîò</span>
            <span class="label">Button</span>
          </div>
          <div class="component-item" style="opacity: 0.5; cursor: not-allowed;" draggable="false">
            <span class="icon">üì¶</span>
            <span class="label">Box</span>
          </div>
          <div class="component-item" style="opacity: 0.5; cursor: not-allowed;" draggable="false">
            <span class="icon">üñºÔ∏è</span>
            <span class="label">Image</span>
          </div>
        </div>
      </aside>
      
      <!-- Editor Canvas -->
      <main class="editor-canvas">
        <div class="canvas-wrapper viewport-desktop">
          <div class="canvas-inner">
            <div class="canvas-title-meta">
              <label class="title-meta-label">üìÑ File:</label>
              <input type="text" id="canvas-title-input" class="title-meta-input" placeholder="Untitled">
            </div>
            <div id="canvas-blocks" class="canvas-blocks">
              <!-- Blocks will be rendered here -->
            </div>
          </div>
        </div>
      </main>
      
      <!-- Right Panel (Status Bar + Properties) -->
      <aside class="right-panel">
        <!-- Status Bar -->
        <div class="status-bar">
          <div class="status-message" id="status-message">
            <span class="status-icon" id="status-icon"></span>
            <span class="status-text" id="status-text" data-i18n="status.autoSave">Auto-save enabled</span>
          </div>
        </div>
        
        <!-- Properties Panel -->
        <div class="properties-panel">
          <div id="properties-content">
            <div class="drafts-backup">
              <div class="file-section">
                <h4 data-i18n="fileOps.drafts">Drafts Backup</h4>
                <button class="file-btn" id="btn-export-current-draft">
                  <span class="file-btn-icon">‚¨áÔ∏è</span>
                  <div class="file-btn-content">
                    <span class="file-btn-label" data-i18n="fileOps.exportCurrentDraft">Export Current Draft</span>
                    <span class="file-btn-desc" data-i18n="fileOps.exportCurrentDraftDesc">Download the current draft as JSON</span>
                  </div>
                </button>
                <button class="file-btn" id="btn-export-drafts">
                  <span class="file-btn-icon">‚¨áÔ∏è</span>
                  <div class="file-btn-content">
                    <span class="file-btn-label" data-i18n="fileOps.exportDrafts">Export Drafts</span>
                    <span class="file-btn-desc" data-i18n="fileOps.exportDraftsDesc">Download all drafts as a JSON file</span>
                  </div>
                </button>
                <button class="file-btn" id="btn-import-drafts">
                  <span class="file-btn-icon">‚¨ÜÔ∏è</span>
                  <div class="file-btn-content">
                    <span class="file-btn-label" data-i18n="fileOps.importDrafts">Import Drafts</span>
                    <span class="file-btn-desc" data-i18n="fileOps.importDraftsDesc">Restore drafts from a JSON backup</span>
                  </div>
                </button>
                <input type="file" id="drafts-file-input" accept="application/json" style="display:none" />
              </div>
            </div>
            <!-- File Operations (shown when no block selected) -->
            <div class="file-operations">
              <div class="file-section">
                <h4>Document</h4>
                <button class="file-btn" id="btn-new">
                  <span class="file-btn-icon">üìÑ</span>
                  <div class="file-btn-content">
                    <span class="file-btn-label">New Draft</span>
                    <span class="file-btn-desc">Create a new draft with title</span>
                  </div>
                </button>
                <button class="file-btn" id="btn-open">
                  <span class="file-btn-icon">üìÇ</span>
                  <div class="file-btn-content">
                    <span class="file-btn-label">Open Draft</span>
                    <span class="file-btn-desc">Browse and open saved drafts</span>
                  </div>
                </button>
                <button class="file-btn" id="btn-save-as">
                  <span class="file-btn-icon">üíæ</span>
                  <div class="file-btn-content">
                    <span class="file-btn-label">Save As</span>
                    <span class="file-btn-desc">Save a copy with new name</span>
                  </div>
                </button>
              </div>
            </div>
              </div>
            </div>
          </div>
        </div>
      </aside>
    </div>
  </div>
  
  <!-- Drafts Manager Modal -->
  <div id="drafts-modal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h2>Manage Drafts</h2>
        <button class="modal-close" id="modal-close">√ó</button>
      </div>
      <div class="modal-body">
        <div id="drafts-list" class="drafts-list">
          <!-- Drafts will be populated here -->
        </div>
        <div class="empty-state" id="empty-state" style="display: none;">
          <p>No saved drafts yet.</p>
          <p style="color: #999; font-size: 13px;">Create content and click "Save" to store your drafts.</p>
        </div>
      </div>
    </div>
  </div>
  
  <!-- Confirm Dialog -->
  <div id="confirm-dialog" class="modal">
    <div class="modal-content dialog-small">
      <div class="modal-header">
        <h2 id="confirm-title">Confirm</h2>
      </div>
      <div class="modal-body">
        <p id="confirm-message"></p>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" id="confirm-cancel">Cancel</button>
        <button class="btn btn-primary" id="confirm-ok">OK</button>
      </div>
    </div>
  </div>
  
  <!-- Prompt Dialog -->
  <div id="prompt-dialog" class="modal">
    <div class="modal-content dialog-small">
      <div class="modal-header">
        <h2 id="prompt-title">Input</h2>
      </div>
      <div class="modal-body">
        <p id="prompt-message"></p>
        <input type="text" id="prompt-input" class="dialog-input" />
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" id="prompt-cancel">Cancel</button>
        <button class="btn btn-primary" id="prompt-ok">OK</button>
      </div>
    </div>
  </div>

  <!-- AI Help Modal -->
  <div id="ai-help-modal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h2 data-i18n="ai.helpTitle">How to use AI</h2>
        <button class="modal-close" id="ai-help-close">√ó</button>
      </div>
      <div class="modal-body">
        <p data-i18n="ai.helpIntro">Use the AI chat to ask questions or propose edits to the current draft.</p>
        <div class="ai-help-chips">
          <span class="ai-help-chip ai-help-chip--blue" data-i18n="ai.helpChipSelect">Select block</span>
          <span class="ai-help-chip ai-help-chip--purple" data-i18n="ai.helpChipAsk">Ask for changes</span>
          <span class="ai-help-chip ai-help-chip--green" data-i18n="ai.helpChipApply">Apply or drop</span>
        </div>
        <h3 class="ai-help-section-title" data-i18n="ai.helpSectionUseCases">Use cases</h3>
        <p class="ai-help-subtitle" data-i18n="ai.helpUseCasesTitle">Common use cases</p>
        <ul class="ai-help-list ai-help-list--usecases">
          <li data-i18n="ai.helpUseCase1">Summarize or tighten a long section into a shorter paragraph.</li>
          <li data-i18n="ai.helpUseCase2">Convert scattered points into a list or cards for readability.</li>
          <li data-i18n="ai.helpUseCase3">Improve tone and clarity while keeping the meaning intact.</li>
          <li data-i18n="ai.helpUseCase4">Target a selected block and propose precise edits only there.</li>
        </ul>
        <h3 class="ai-help-section-title" data-i18n="ai.helpSectionRules">Rules & limits</h3>
        <ul class="ai-help-list">
          <li data-i18n="ai.helpItem1">Select a block to target edits; leave nothing selected to edit the whole draft.</li>
          <li data-i18n="ai.helpItem2">Ask for changes in plain language. Apply or drop suggestions after review.</li>
          <li data-i18n="ai.helpItem3">Use **bold** and {blue}/{red} markers for emphasis (no HTML/CSS).</li>
          <li data-i18n="ai.helpItem4">Use header presets for color (blue/red) instead of markers.</li>
          <li data-i18n="ai.helpLimit1">Limitations: The AI only edits the current draft content and allowed block types.</li>
          <li data-i18n="ai.helpLimit2">It cannot add custom CSS, HTML elements, or unsupported fields.</li>
          <li data-i18n="ai.helpLimit3">Always review suggestions before applying; results may need manual tweaks.</li>
        </ul>
      </div>
      <div class="modal-footer">
        <button class="btn btn-primary" id="ai-help-ok" data-i18n="ai.helpClose">OK</button>
      </div>
    </div>
  </div>
  
  <!-- Scripts -->
  <script src="js/constants.js"></script>
  <script src="js/utils.js"></script>
  <script src="js/dialogs.js"></script>
  <script src="js/i18n.js"></script>
  <script src="js/modules/palette.js"></script>
  <script src="js/modules/components.js"></script>
  <script src="js/modules/exporters.js"></script>
  <script src="js/modules/editor.js"></script>
  <script src="js/modules/properties.js"></script>
  <script src="js/modules/ui.js"></script>
  <script src="js/modules/drafts.js"></script>
  <script src="js/modules/events.js"></script>
  <script src="js/modules/selection.js"></script>
  <script src="js/modules/markdown-importer.js"></script>
  <script src="js/state.js"></script>
  <script src="js/exporters/html-exporter.js"></script>
  <script src="js/modules/toolbar.js"></script>
  <script src="js/formatting-toolbar.js"></script>
  <script src="js/components/header-component.js"></script>
  <script src="js/components/paragraph-component.js"></script>
  <script src="js/components/list-component.js"></script>
  <script src="js/components/card-component.js"></script>
  <script src="js/components/registry.js"></script>
  <script src="js/app.js"></script>
  <script src="js/init.js"></script>
</body>
</html>
